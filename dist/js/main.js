!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){n(1),e.exports=n(2)},function(e,t,n){"use strict";n.r(t);var a=100,o={type:"attack","max-impact":-7,"button-id":"attack",message:function(e,t){return"".concat(e.name," a subi une attaque simple de ").concat(Math.abs(t),". Il en est à ").concat(e.healthValue)}},s={type:"special-attack","max-impact":-14,"button-id":"special-attack",message:function(e,t){return"".concat(e.name," a subi une attaque spéciale de ").concat(Math.abs(t),". Il en est à ").concat(e.healthValue)}},i="heal",r=7,c="heal",u=function(e,t){return"".concat(e.name," a été soigné de de ").concat(Math.abs(t),". Il en est à ").concat(e.healthValue)};function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var h=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=null,this._status=t,this.name=n,this._healthValue=a}var t,n,o;return t=e,(n=[{key:"healthValue",get:function(){return this._healthValue},set:function(e){this._healthValue=e}},{key:"status",get:function(){return this._status},set:function(e){this._status=e}}])&&l(t.prototype,n),o&&l(t,o),e}(),d={opponents:[new h("Player","Dominique 🐒"),new h("Monster","Chewbacca 🦁")],messages:[],status:"not-playing",reset:function(){this.status="not-playing",this.messages=[],this.opponents.forEach(function(e){e.healthValue=a})},addMessageToLog:function(e){this.messages.push(e)},get losers(){return this.opponents.filter(function(e){return e.healthValue<=0})}},p={init:function(){this.gameDiv=document.querySelector("#game"),this.controlsDiv=document.querySelector("#controls"),this.logDiv=document.querySelector("#log"),this.opponentTemplate=document.querySelector("template.opponent"),this.notPlayingTemplate=document.querySelector("template#".concat("not-playing")),this.playingTemplate=document.querySelector("template#".concat("playing")),this.defeatModalTemplate=document.querySelector("template#defeat-modal"),this.buildOpponentsNodes(),this.buildControlsNodes()},buildOpponentsNodes:function(){var e=this;d.opponents.forEach(function(t){t.node=document.importNode(e.opponentTemplate.content,!0),t.node.querySelector("div:first-child").id=t.status.toLowerCase(),t.node.querySelector(".opponent__status").textContent=t.status,t.node.querySelector(".opponent__name").textContent=t.name,t.node.querySelector(".health__bar").classList.add(t.status.toLowerCase()),t.node.querySelector(".health__value").textContent=t.healthValue,e.gameDiv.appendChild(t.node)})},buildControlsNodes:function(){var e=null;switch(this.controlsDiv.innerHTML="",d.status){case"not-playing":e=document.importNode(this.notPlayingTemplate.content,!0);break;case"playing":e=document.importNode(this.playingTemplate.content,!0);break;default:console.error("".concat(d.status," is not a valid case when chosing which controls to show"))}this.controlsDiv.appendChild(e)},buildDefeatModal:function(){var e="",t=d.losers;return e=t.length>1?"".concat(t[0].name," et ").concat(t[1].name," ont perdu tous les deux 🌪. Recommencer"):"".concat(t[0].name," a perdu 💣. Recommencer"),window.confirm(e)},updateAfterAction:function(){var e=this;d.messages.length?(this.logDiv.insertAdjacentHTML("afterbegin","<p>".concat(d.messages[d.messages.length-2],"</p>")),this.logDiv.insertAdjacentHTML("afterbegin","<p>".concat(d.messages[d.messages.length-1],"</p>"))):this.logDiv.innerHTML="",d.opponents.forEach(function(t){e.gameDiv.querySelector(".".concat(t.status.toLowerCase(),".health__bar")).style.width="".concat(t.healthValue,"%"),e.gameDiv.querySelector(".".concat(t.status.toLowerCase(),".health__bar")).style.backgroundColor="hsl(".concat(1.2*t.healthValue,",50%,50%"),e.gameDiv.querySelector(".".concat(t.status.toLowerCase(),".health__bar .health__value")).textContent=t.healthValue})},reset:function(){this.buildControlsNodes(),this.updateAfterAction()}},m={init:function(){p.init(),p.controlsDiv.addEventListener("click",this.dispatchAction)},dispatchAction:function(e){switch(e.target.id){case"start-new-game":m.startNewGame();break;case o["button-id"]:m.attack(o);break;case s["button-id"]:m.attack(s);break;case c:m.heal();break;case"give-up":m.giveUp()}},getRandomValue:function(e){switch(e){case o.type:return Math.floor(Math.random()*o["max-impact"]);case s.type:return Math.floor(Math.random()*s["max-impact"]);case i:return Math.ceil(Math.random()*r);default:console.error("".concat(e," n’est pas un type d’action autorisé pour obtenir un nombre aléatoire"))}},startNewGame:function(){d.status="playing",p.buildControlsNodes()},giveUp:function(){d.reset(),p.reset()},attack:function(e){var t=this;d.opponents.forEach(function(n){var a=t.getRandomValue(e.type);n.healthValue+=a,d.addMessageToLog(e.message(n,a))}),0===d.losers.length?p.updateAfterAction():p.buildDefeatModal()?this.giveUp():p.controlsDiv.removeEventListener("click",this.dispatchAction)},heal:function(){var e=this;d.opponents.forEach(function(t){var n=e.getRandomValue(i);t.healthValue+n<=a?(t.healthValue+=n,d.addMessageToLog(u(t,n))):(t.healthValue=a,d.addMessageToLog("".concat(t.name," est au maximum de santé")))}),p.updateAfterAction()}};m.init()},function(e,t){}]);